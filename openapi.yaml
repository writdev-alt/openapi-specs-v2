openapi: 3.0.3
info:
  title: WRPay - Secure Payments & Advanced Merchant Gateway API Documentation
  description: Merchant-facing API for initiating payments, managing wallets, and automating withdrawals for IlonaPay.
  version: 1.0.0
  x-logo:
    url: ./ilona-logo.png
    altText: IlonaPay Logo
    backgroundColor: '#FFFFFF'
  x-dark-logo:
    url: ./ilona-light-logo.png
    altText: IlonaPay Logo
servers:
  - url: https://sandbox.ilonapay.com
    description: Sandbox environment for testing and development
  - url: https://production.ilonapay.com
    description: Production environment for live transactions
tags:
  - name: Payments
    description: Endpoints for initiating and processing payment transactions
  - name: Transactions
    description: Endpoints for checking transaction status and managing callbacks
  - name: Wallets
    description: Endpoints for managing merchant wallets and balances
  - name: Withdraw Accounts
    description: Endpoints for managing withdrawal account configurations
  - name: Withdrawals
    description: Endpoints for creating and managing withdrawal requests
components:
  securitySchemes:
    $ref: ./components/security.yaml#/securitySchemes
  responses:
    $ref: ./components/responses.yaml#/responses
  schemas:
    $ref: ./components/schemas.yaml#/schemas
security:
  - default: []
paths:
  /api/v2/initiate-payment-qris:
    post:
      summary: Process QRIS payment request.
      operationId: processQRISPaymentRequest
      description: |-
        Create a QRIS (Quick Response Code Indonesian Standard) payment request that is routed
        through the Netzme payment gateway. The response contains the QR data needed for rendering
        the QR code along with transaction identifiers.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: QRIS payment request created successfully. Returns transaction ID, reference, and QR code content.
          content:
            application/json:
              schema:
                type: object
                example:
                  trx_id: TRX20241101001
                  ref_trx: INV-2024-0001
                  qris_content: 00020101021226680012IDCO...
                properties:
                  trx_id:
                    type: string
                    example: TRX20241101001
                  ref_trx:
                    type: string
                    example: INV-2024-0001
                  qris_content:
                    type: string
                    example: 00020101021226680012IDCO...
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Payments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                ref_trx:
                  type: string
                  description: Unique merchant transaction reference.
                  example: INV-2024-0001
                  nullable: false
                currency_code:
                  type: string
                  description: Must be `IDR`.
                  example: IDR
                  nullable: false
                amount:
                  type: number
                  description: Total amount to be charged to the customer.
                  example: 150000.5
                  nullable: false
                expiration_time:
                  type: integer
                  description: Expiry time for the QR code in minutes (30 - 1440).
                  example: 60
                  nullable: false
                note:
                  type: string
                  description: A short internal note about the transaction.
                  example: QRIS top-up
                  nullable: true
                description:
                  type: string
                  description: A customer-facing description that will appear on receipts.
                  example: QRIS payment for invoice INV-2024-0001
                  nullable: true
                customer_name:
                  type: string
                  description: Customer full name.
                  example: Budi Santoso
                  nullable: true
                customer_phone:
                  type: string
                  description: Customer phone number in international format.
                  example: '+628123456789'
                  nullable: true
              required:
                - ref_trx
                - currency_code
                - amount
  /api/v2/check-status/{trx_id}:
    get:
      summary: Check transaction status.
      operationId: checkTransactionStatus
      description: Retrieve the latest status for an existing transaction using its `trx_id`.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Transaction status retrieved successfully. Returns current status, transaction details, and payment information.
          content:
            application/json:
              schema:
                type: object
                example:
                  status: completed
                  message: Payment, request status checked successfully.
                  data:
                    trx_id: TRX20241101001
                    trx_ref: INV-2024-0001
                    rrn: '123456789012'
                    amount: 150000
                    currency_code: IDR
                    status: completed
                properties:
                  status:
                    $ref: '#/components/schemas/TransactionStatus'
                  message:
                    type: string
                    example: Payment, request status checked successfully.
                  data:
                    type: object
                    properties:
                      trx_id:
                        type: string
                        example: TRX20241101001
                      trx_ref:
                        type: string
                        example: INV-2024-0001
                      rrn:
                        type: string
                        example: '123456789012'
                      amount:
                        type: integer
                        example: 150000
                      currency_code:
                        type: string
                        example: IDR
                      status:
                        $ref: '#/components/schemas/TransactionStatus'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Transactions
    parameters:
      - in: path
        name: trx_id
        description: The unique transaction identifier generated by the system.
        example: TRX20241101001
        required: true
        schema:
          type: string
  /api/v2/resend-callback/{trx_id}:
    post:
      summary: Resend callback notification.
      operationId: resendCallback
      description: Resend the callback notification for an existing transaction using its `trx_id`. This endpoint allows merchants to manually trigger callback delivery if the initial callback was not received or failed.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Callback resend request processed successfully. Returns confirmation message and callback status.
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Callback resend request has been queued successfully.
                  data:
                    trx_id: TRX20241101001
                    callback_status: queued
                    queued_at: '2024-11-01T10:30:00Z'
                properties:
                  message:
                    type: string
                    example: Callback resend request has been queued successfully.
                  data:
                    type: object
                    properties:
                      trx_id:
                        type: string
                        example: TRX20241101001
                      callback_status:
                        type: string
                        example: queued
                        description: Status of the callback resend request (queued, sent, failed)
                      queued_at:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:30:00Z'
                        description: Timestamp when the callback was queued for resending
        '404':
          $ref: '#/components/responses/NotFound'
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Transactions
    parameters:
      - in: path
        name: trx_id
        description: The unique transaction identifier generated by the system.
        example: TRX20241101001
        required: true
        schema:
          type: string
  /api/v2/get-invoice/{trx_id}:
    get:
      summary: Get invoice details.
      operationId: getInvoice
      description: Retrieve invoice details for an existing transaction using its `trx_id`.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Invoice details retrieved successfully. Returns invoice information, transaction details, and payment information.
          content:
            application/json:
              schema:
                type: object
                example:
                  status: completed
                  message: Invoice retrieved successfully.
                  data:
                    trx_id: TRX20241101001
                    trx_ref: INV-2024-0001
                    amount: 150000
                    currency_code: IDR
                    status: completed
                    customer_name: Budi Santoso
                    customer_phone: '+628123456789'
                    description: QRIS payment for invoice INV-2024-0001
                    note: QRIS top-up
                    qris_content: 00020101021226680012IDCO...
                    qr_image_url: https://api.example.com/qr/TRX20241101001.png
                    created_at: '2024-11-01T10:00:00Z'
                    paid_at: '2024-11-01T10:15:00Z'
                properties:
                  status:
                    $ref: '#/components/schemas/TransactionStatus'
                  message:
                    type: string
                    example: Invoice retrieved successfully.
                  data:
                    type: object
                    properties:
                      trx_id:
                        type: string
                        example: TRX20241101001
                      trx_ref:
                        type: string
                        example: INV-2024-0001
                      amount:
                        type: integer
                        example: 150000
                      currency_code:
                        type: string
                        example: IDR
                      status:
                        $ref: '#/components/schemas/TransactionStatus'
                      customer_name:
                        type: string
                        example: Budi Santoso
                        nullable: true
                      customer_phone:
                        type: string
                        example: '+628123456789'
                        nullable: true
                      description:
                        type: string
                        example: QRIS payment for invoice INV-2024-0001
                        nullable: true
                      note:
                        type: string
                        example: QRIS top-up
                        nullable: true
                      qris_content:
                        type: string
                        example: 00020101021226680012IDCO...
                        description: QRIS payment content string for generating QR code.
                        nullable: true
                      qr_image_url:
                        type: string
                        format: uri
                        example: https://api.example.com/qr/TRX20241101001.png
                        description: URL to the QR code image for the transaction.
                        nullable: true
                      created_at:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:00:00Z'
                      paid_at:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:15:00Z'
                        nullable: true
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Transactions
    parameters:
      - in: path
        name: trx_id
        description: The unique transaction identifier generated by the system.
        example: TRX20241101001
        required: true
        schema:
          type: string
  /api/v2/wallets:
    get:
      summary: List wallets.
      operationId: listWallets
      description: Retrieve all wallets that belong to the authenticated merchant user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: List of wallets retrieved successfully. Returns an array of wallet objects with UUID, currency, balance, hold balance, and available balance.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    uuid:
                      type: string
                      example: c6c02b3e-5f5f-4f7b-b2c0-e7a01ad131ab
                    currency_code:
                      type: string
                      example: IDR
                    balance:
                      type: integer
                      example: 2500000
                    hold_balance:
                      type: integer
                      example: 0
                    available_balance:
                      type: integer
                      example: 2500000
                example:
                  - uuid: c6c02b3e-5f5f-4f7b-b2c0-e7a01ad131ab
                    currency_code: IDR
                    balance: 2500000
                    hold_balance: 0
                    available_balance: 2500000
      tags:
        - Wallets
  /api/v2/wallets/{uuid}:
    get:
      summary: Show wallet details.
      operationId: showWalletDetails
      description: Fetch detailed information for a single wallet owned by the authenticated merchant user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: List of wallets retrieved successfully. Returns an array of wallet objects with UUID, currency, balance, hold balance, and available balance.
          content:
            application/json:
              schema:
                type: object
                example:
                  uuid: c6c02b3e-5f5f-4f7b-b2c0-e7a01ad131ab
                  currency_code: IDR
                  balance: 2500000
                  hold_balance: 0
                  available_balance: 2500000
                properties:
                  uuid:
                    type: string
                    example: c6c02b3e-5f5f-4f7b-b2c0-e7a01ad131ab
                  currency_code:
                    type: string
                    example: IDR
                  balance:
                    type: integer
                    example: 2500000
                  hold_balance:
                    type: integer
                    example: 0
                  available_balance:
                    type: integer
                    example: 2500000
        '422':
          $ref: '#/components/responses/ValidationError'
      tags:
        - Wallets
    parameters:
      - in: path
        name: uuid
        description: Wallet UUID returned by the list wallets endpoint.
        example: c6c02b3e-5f5f-4f7b-b2c0-e7a01ad131ab
        required: true
        schema:
          type: string
  /api/v2/withdraw-accounts/methods:
    get:
      summary: List withdraw methods.
      operationId: listWithdrawMethods
      description: Retrieve all active withdrawal methods supported by the system.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: List of active withdrawal methods retrieved successfully. Returns an array of methods with ID, name, and supported currency.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    - id: 1
                      name: Bank Transfer
                      currency: IDR
                properties:
                  data:
                    type: array
                    example:
                      - id: 1
                        name: Bank Transfer
                        currency: IDR
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        name:
                          type: string
                          example: Bank Transfer
                        currency:
                          type: string
                          example: IDR
      tags:
        - Withdraw Accounts
  /api/v2/withdraw-accounts/lists:
    get:
      summary: Fetch payout bank and wallet catalog.
      operationId: fetchPayoutBankAndWalletCatalog
      description: Retrieve the list of supported banks and wallets from the Easylink gateway.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Payout bank and wallet catalog retrieved successfully. Returns lists of supported banks and digital wallets with their IDs and names.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    banks:
                      - bank_id: '014'
                        bank_name: BCA
                    wallets:
                      - wallet_id: GOPAY
                        wallet_name: GoPay
                properties:
                  data:
                    type: object
                    properties:
                      banks:
                        type: array
                        example:
                          - bank_id: '014'
                            bank_name: BCA
                        items:
                          type: object
                          properties:
                            bank_id:
                              type: string
                              example: '014'
                            bank_name:
                              type: string
                              example: BCA
                      wallets:
                        type: array
                        example:
                          - wallet_id: GOPAY
                            wallet_name: GoPay
                        items:
                          type: object
                          properties:
                            wallet_id:
                              type: string
                              example: GOPAY
                            wallet_name:
                              type: string
                              example: GoPay
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Withdraw Accounts
  /api/v2/withdraw-accounts/{id}/info:
    get:
      summary: Inspect withdraw account limits.
      operationId: inspectWithdrawAccountLimits
      description: Retrieve withdraw method configuration such as min/max limits and charges.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Withdraw account limits and configuration retrieved successfully. Returns minimum/maximum limits, charges, currency, processing time, and conversion rate.
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Account information retrieved successfully
                  data:
                    min_limit: 50000
                    max_limit: 50000000
                    charge: 5000
                    charge_type: fixed
                    currency: IDR
                    processing_time: H+1
                    conversion_rate: 1
                properties:
                  message:
                    type: string
                    example: Account information retrieved successfully
                  data:
                    type: object
                    properties:
                      min_limit:
                        type: integer
                        example: 50000
                      max_limit:
                        type: integer
                        example: 50000000
                      charge:
                        type: integer
                        example: 5000
                      charge_type:
                        type: string
                        example: fixed
                      currency:
                        type: string
                        example: IDR
                      processing_time:
                        type: string
                        example: H+1
                      conversion_rate:
                        type: integer
                        example: 1
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Withdraw Accounts
    parameters:
      - in: path
        name: id
        description: Withdraw account ID.
        example: 15
        required: true
        schema:
          type: integer
  /api/v2/withdraw-accounts:
    get:
      summary: List withdraw accounts.
      operationId: listWithdrawAccounts
      description: |-
        Retrieve all withdraw accounts created by the authenticated merchant user. Optionally filter
        by wallet currency.
      parameters:
        - in: query
          name: wallet_id
          description: Filter accounts by wallet UUID so the currency matches.
          example: f8f3e8f8-0b1a-4cd5-a8fc-3cf1328a0a6f
          required: false
          schema:
            type: string
            description: Filter accounts by wallet UUID so the currency matches.
            example: f8f3e8f8-0b1a-4cd5-a8fc-3cf1328a0a6f
            nullable: false
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: List of withdraw accounts retrieved successfully. Returns an array of account objects with ID, name, account number, and associated withdrawal method details.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    - id: 15
                      name: Bank BCA
                      account_number: '1234567890'
                      withdraw_method:
                        id: 3
                        name: Bank Transfer
                        currency: IDR
                properties:
                  data:
                    type: array
                    example:
                      - id: 15
                        name: Bank BCA
                        account_number: '1234567890'
                        withdraw_method:
                          id: 3
                          name: Bank Transfer
                          currency: IDR
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 15
                        name:
                          type: string
                          example: Bank BCA
                        account_number:
                          type: string
                          example: '1234567890'
                        withdraw_method:
                          type: object
                          properties:
                            id:
                              type: integer
                              example: 3
                            name:
                              type: string
                              example: Bank Transfer
                            currency:
                              type: string
                              example: IDR
        '422':
          $ref: '#/components/responses/ValidationError'
      tags:
        - Withdraw Accounts
    post:
      summary: Create a withdraw account.
      operationId: createAWithdrawAccount
      description: Store a new withdraw account for the authenticated merchant user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '201':
          description: Withdraw account created successfully. Returns the newly created account with ID, name, account number, and withdrawal method details.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    id: 15
                    name: Bank BCA
                    account_number: '1234567890'
                    withdraw_method:
                      id: 3
                      name: Bank Transfer
                      currency: IDR
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      name:
                        type: string
                        example: Bank BCA
                      account_number:
                        type: string
                        example: '1234567890'
                      withdraw_method:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          name:
                            type: string
                            example: Bank Transfer
                          currency:
                            type: string
                            example: IDR
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Withdraw Accounts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                method_id:
                  type: integer
                  description: Identifier of the payout method returned by `lists`.
                  example: 1
                  nullable: false
                bank_code:
                  type: string
                  description: Bank or wallet code as supplied by the gateway.
                  example: '014'
                  nullable: false
                category:
                  type: string
                  description: Must be one of `Customer` or `Reconcile`.
                  example: Customer
                  nullable: false
                account_number:
                  type: string
                  description: Destination account or wallet number.
                  example: '1234567890'
                  nullable: false
                account_holder_name:
                  type: string
                  description: Account holder full name.
                  example: Budi Santoso
                  nullable: false
                branch_name:
                  type: string
                  description: Branch name registered for the account.
                  example: KC Jakarta
                  nullable: true
                country:
                  type: string
                  description: Country ISO name.
                  example: Indonesia
                  nullable: true
                account_type:
                  type: string
                  description: Account type or currency indicator provided by the gateway.
                  example: Saving
                  nullable: true
                additional_info:
                  type: string
                  description: Additional metadata to pass to the gateway.
                  example: '{"bankCity":"Jakarta"}'
                  nullable: true
              required:
                - method_id
                - bank_code
                - category
                - account_number
                - account_holder_name
  /api/v2/withdraw-accounts/{id}:
    get:
      summary: Show withdraw account details.
      operationId: showWithdrawAccountDetails
      description: Retrieve a single withdraw account owned by the authenticated user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Withdraw account details retrieved successfully. Returns account information including ID, name, account number, and associated withdrawal method.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    id: 15
                    name: Bank BCA
                    account_number: '1234567890'
                    withdraw_method:
                      id: 3
                      name: Bank Transfer
                      currency: IDR
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      name:
                        type: string
                        example: Bank BCA
                      account_number:
                        type: string
                        example: '1234567890'
                      withdraw_method:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          name:
                            type: string
                            example: Bank Transfer
                          currency:
                            type: string
                            example: IDR
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Withdraw Accounts
    put:
      summary: Update a withdraw account.
      operationId: updateAWithdrawAccount
      description: Modify a withdraw account owned by the authenticated user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Withdraw account updated successfully. Returns the updated account information with ID, name, account number, and withdrawal method details.
          content:
            application/json:
              schema:
                type: object
                example:
                  data:
                    id: 15
                    name: Bank BCA
                    account_number: '1234567890'
                    withdraw_method:
                      id: 3
                      name: Bank Transfer
                      currency: IDR
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 15
                      name:
                        type: string
                        example: Bank BCA
                      account_number:
                        type: string
                        example: '1234567890'
                      withdraw_method:
                        type: object
                        properties:
                          id:
                            type: integer
                            example: 3
                          name:
                            type: string
                            example: Bank Transfer
                          currency:
                            type: string
                            example: IDR
        '422':
          $ref: '#/components/responses/ValidationError'
        '500':
          $ref: '#/components/responses/ServerError'
      tags:
        - Withdraw Accounts
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                method_id:
                  type: integer
                  description: Identifier of the payout method returned by `lists`.
                  example: 1
                  nullable: false
                bank_code:
                  type: string
                  description: Bank or wallet code as supplied by the gateway.
                  example: '014'
                  nullable: false
                category:
                  type: string
                  description: Must be one of `Customer` or `Reconcile`.
                  example: Customer
                  nullable: false
                account_number:
                  type: string
                  description: Destination account or wallet number.
                  example: '1234567890'
                  nullable: false
                account_holder_name:
                  type: string
                  description: Account holder full name.
                  example: Budi Santoso
                  nullable: false
                branch_name:
                  type: string
                  description: Branch name registered for the account.
                  example: KC Jakarta
                  nullable: true
                country:
                  type: string
                  description: Country ISO name.
                  example: Indonesia
                  nullable: true
                account_type:
                  type: string
                  description: Account type or currency indicator provided by the gateway.
                  example: Saving
                  nullable: true
                additional_info:
                  type: string
                  description: Additional metadata to pass to the gateway.
                  example: '{"bankCity":"Jakarta"}'
                  nullable: true
              required:
                - method_id
                - bank_code
                - category
                - account_number
                - account_holder_name
    delete:
      summary: Delete a withdraw account.
      operationId: deleteAWithdrawAccount
      description: Remove a withdraw account owned by the authenticated user.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '200':
          description: Withdraw account deleted successfully. Returns a success message confirming the deletion.
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Withdraw account deleted successfully
                properties:
                  message:
                    type: string
                    example: Withdraw account deleted successfully
        '404':
          $ref: '#/components/responses/NotFound'
      tags:
        - Withdraw Accounts
    parameters:
      - in: path
        name: id
        description: Withdraw account ID.
        example: 15
        required: true
        schema:
          type: integer
  /api/v2/withdraw:
    post:
      summary: Create a withdrawal.
      operationId: createAWithdrawal
      description: Submit a withdrawal request for one of the authenticated merchant user's wallets.
      parameters:
        - in: header
          name: X-API-KEY
          description: Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-API-KEY}'
          schema:
            type: string
        - in: header
          name: X-MERCHANT-KEY
          description: Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.
          example: '{X-MERCHANT-KEY}'
          schema:
            type: string
      responses:
        '201':
          description: Withdrawal request created successfully. Returns transaction ID, amount, account ID, and wallet ID.
          content:
            application/json:
              schema:
                type: object
                example:
                  message: Withdrawal has been created.
                  data:
                    trx_id: TRX20241101001
                    amount: 250000
                    account_id: 15
                    wallet_id: f8f3e8f8-0b1a-4cd5-a8fc-3cf1328a0a6f
                properties:
                  message:
                    type: string
                    example: Withdrawal has been created.
                  data:
                    type: object
                    properties:
                      trx_id:
                        type: string
                        example: TRX20241101001
                      amount:
                        type: integer
                        example: 250000
                      account_id:
                        type: integer
                        example: 15
                      wallet_id:
                        type: string
                        example: f8f3e8f8-0b1a-4cd5-a8fc-3cf1328a0a6f
        '422':
          $ref: '#/components/responses/ValidationError'
      tags:
        - Withdrawals
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                trx_ref:
                  type: string
                  description: Unique merchant reference for the withdrawal.
                  example: WD-2024-0001
                  nullable: true
                account_id:
                  type: integer
                  description: Identifier of the saved withdraw account.
                  example: 15
                  nullable: false
                wallet_id:
                  type: string
                  description: UUID of the wallet to withdraw from.
                  example: f8f3e8f8-0b1a-4cd5-a8fc-3cf1328a0a6f
                  nullable: false
                amount:
                  type: number
                  description: Withdrawal amount between 50,000 and 50,000,000.
                  example: 250000
                  nullable: false
              required:
                - account_id
                - wallet_id
                - amount
