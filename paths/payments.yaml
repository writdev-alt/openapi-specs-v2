/api/v2/payments:
  get:
    summary: 'List payment transactions.'
    operationId: listPayments
    description: 'Retrieve a list of payment transactions for the authenticated merchant. Returns payment transactions with their status, amounts, and transaction details.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
      -
        in: query
        name: status
        description: 'Filter payments by status (pending, completed, failed, canceled, expired).'
        required: false
        schema:
          type: string
          enum:
            - pending
            - completed
            - failed
            - canceled
            - expired
        example: completed
      -
        in: query
        name: page
        description: 'Page number for pagination. Default is 1.'
        required: false
        schema:
          type: integer
          minimum: 1
          default: 1
        example: 1
      -
        in: query
        name: per_page
        description: 'Number of payments per page. Default is 20, maximum is 100.'
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        example: 20
    responses:
      200:
        description: 'List of payment transactions retrieved successfully. Returns an array of payment transactions with their details.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '20001002'
                message:
                  type: string
                  example: 'List of payment transactions retrieved successfully.'
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      trxId:
                        type: string
                        example: TRX20241101001
                      trxRef:
                        type: string
                        example: INV-2024-0001
                        nullable: true
                      referenceNumber:
                        type: string
                        example: '123456789012'
                        nullable: true
                      amount:
                        type: integer
                        example: 150000
                      currencyCode:
                        type: string
                        example: IDR
                      status:
                        $ref: '#/components/schemas/TransactionStatus'
                      paymentMethod:
                        type: string
                        example: QRIS
                        nullable: true
                      description:
                        type: string
                        example: QRIS payment for invoice INV-2024-0001
                        nullable: true
                      customerName:
                        type: string
                        example: Budi Santoso
                        nullable: true
                      customerPhone:
                        type: string
                        example: '+628123456789'
                        nullable: true
                      createdAt:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:00:00Z'
                      paidAt:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:15:00Z'
                        nullable: true
                pageNumber:
                  type: integer
                  example: 1
                pageSize:
                  type: integer
                  example: 2
                hasNext:
                  type: boolean
                  example: true
                hasPrev:
                  type: boolean
                  example: false
              example:
                code: '20001002'
                message: 'List of payment transactions retrieved successfully.'
                data:
                  -
                    trxId: TRX20241101001
                    trxRef: INV-2024-0001
                    referenceNumber: '123456789012'
                    amount: 150000
                    currencyCode: IDR
                    status: completed
                    paymentMethod: QRIS
                    description: QRIS payment for invoice INV-2024-0001
                    customerName: Budi Santoso
                    customerPhone: '+628123456789'
                    createdAt: '2024-11-01T10:00:00Z'
                    paidAt: '2024-11-01T10:15:00Z'
                  -
                    trxId: TRX20241101002
                    trxRef: INV-2024-0002
                    referenceNumber: null
                    amount: 200000
                    currencyCode: IDR
                    status: pending
                    paymentMethod: QRIS
                    description: QRIS payment for invoice INV-2024-0002
                    customerName: null
                    customerPhone: null
                    createdAt: '2024-11-01T11:00:00Z'
                    paidAt: null
                pageNumber: 1
                pageSize: 2
                hasNext: true
                hasPrev: false
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
/api/v2/initiate-payment-qris:
  post:
    summary: 'Process QRIS payment request.'
    operationId: processQRISPaymentRequest
    description: "Create a QRIS (Quick Response Code Indonesian Standard) payment request that is routed\nthrough the Netzme payment gateway. The response contains the QR data needed for rendering\nthe QR code along with transaction identifiers."
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      200:
        description: 'QRIS payment request created successfully. Returns transaction ID, reference, and QR code content.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20001001'
                message: 'QRIS payment request created successfully.'
                data:
                  trxId: TRX20241101001
                  trxRef: INV-2024-0001
                  qrisContent: 00020101021226650013ID.NETZME.WWW01189360081401001083820215ID20240000002480303UKE51440014ID.CO.QRIS.WWW0215ID20240000002480303UKE5204413153033605405100005802ID5903RPD6008SIMEULUE61052389562690703A010812qris_invoice99420002000132377c254d3d0f4fbe8edce9b7d3d7a55a63047DD5
                  createdAt: '2025-10-20T16:57:10.444+07:00'
                  expiredAt: '2025-10-20T17:57:10.309+07:00'
                  feeAmount: 70
                  invoiceId: INV-M_JH8gxUJR17609542303095Up
                  qrContent: 00020101021226650013ID.NETZME.WWW01189360081401001083820215ID20240000002480303UKE51440014ID.CO.QRIS.WWW0215ID20240000002480303UKE5204413153033605405100005802ID5903RPD6008SIMEULUE61052389562690703A010812qris_invoice99420002000132377c254d3d0f4fbe8edce9b7d3d7a55a63047DD5
                  statistic: []
                  terminalId: A01
                  totalAmount: 10000
                  merchantLocation: SIMEULUE
              properties:
                code:
                  type: string
                  example: '20001001'
                message:
                  type: string
                  example: 'QRIS payment request created successfully.'
                data:
                  type: object
                  properties:
                    trxId:
                      type: string
                      example: TRX20241101001
                    trxRef:
                      type: string
                      example: INV-2024-0001
                      nullable: true
                    qrisContent:
                      type: string
                      example: 00020101021226650013ID.NETZME.WWW01189360081401001083820215ID20240000002480303UKE51440014ID.CO.QRIS.WWW0215ID20240000002480303UKE5204413153033605405100005802ID5903RPD6008SIMEULUE61052389562690703A010812qris_invoice99420002000132377c254d3d0f4fbe8edce9b7d3d7a55a63047DD5
                      nullable: true
                    createdAt:
                      type: string
                      format: date-time
                      example: '2025-10-20T16:57:10.444+07:00'
                    expiredAt:
                      type: string
                      format: date-time
                      example: '2025-10-20T17:57:10.309+07:00'
                    feeAmount:
                      type: integer
                      example: 70
                    invoiceId:
                      type: string
                      example: INV-M_JH8gxUJR17609542303095Up
                    qrContent:
                      type: string
                      example: 00020101021226650013ID.NETZME.WWW01189360081401001083820215ID20240000002480303UKE51440014ID.CO.QRIS.WWW0215ID20240000002480303UKE5204413153033605405100005802ID5903RPD6008SIMEULUE61052389562690703A010812qris_invoice99420002000132377c254d3d0f4fbe8edce9b7d3d7a55a63047DD5
                    statistic:
                      type: array
                      items: {}
                      example: []
                    terminalId:
                      type: string
                      example: A01
                    totalAmount:
                      type: integer
                      example: 10000
                    merchantLocation:
                      type: string
                      example: SIMEULUE
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              trxRef:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0001
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be charged to the customer.'
                example: 150000.5
                nullable: false
              expirationTime:
                type: integer
                description: 'Expiry time for the QR code in minutes (30 - 1440).'
                example: 60
                nullable: false
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'QRIS top-up'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'QRIS payment for invoice INV-2024-0001'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
            required:
              - trxRef
              - currencyCode
              - amount
/api/v2/initiate-payment-virtual-account:
  post:
    summary: 'Process virtual account payment request.'
    operationId: processVirtualAccountPaymentRequest
    description: 'Create a virtual account payment request for bank transfer. The response contains the virtual account number that customers can use to make payments via bank transfer or ATM.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      201:
        description: 'Virtual account payment request created successfully. Returns transaction ID, reference, virtual account number, and bank details.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20101001'
                message: 'Virtual account payment request created successfully.'
                data:
                  trxId: TRX20241101002
                  trxRef: INV-2024-0002
                  virtualAccountNumber: '0141234567890123456'
                  bankCode: '014'
                  bankName: BCA
                  expirationTime: 1440
                  expirationAt: '2024-11-02T10:00:00Z'
              properties:
                code:
                  type: string
                  example: '20101001'
                message:
                  type: string
                  example: 'Virtual account payment request created successfully.'
                data:
                  type: object
                  properties:
                    trxId:
                      type: string
                      example: TRX20241101002
                    trxRef:
                      type: string
                      example: INV-2024-0002
                      nullable: true
                    virtualAccountNumber:
                      type: string
                      example: '0141234567890123456'
                      nullable: true
                    bankCode:
                      type: string
                      example: '014'
                      nullable: true
                    bankName:
                      type: string
                      example: BCA
                      nullable: true
                    expirationTime:
                      type: integer
                      example: 1440
                      nullable: true
                    expirationAt:
                      type: string
                      format: date-time
                      example: '2024-11-02T10:00:00Z'
                      nullable: true
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              trxRef:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0002
                nullable: false
              bankCode:
                type: string
                description: 'Bank code identifier. Use `/api/v2/banks` endpoint to get available bank codes.'
                example: '014'
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be charged to the customer.'
                example: 250000.5
                nullable: false
              expirationTime:
                type: integer
                description: 'Expiry time for the virtual account in minutes (30 - 1440). Default is 1440 (24 hours).'
                example: 1440
                nullable: false
                minimum: 30
                maximum: 1440
                default: 1440
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'Virtual account payment for invoice'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'Virtual account payment for invoice INV-2024-0002'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
              customerEmail:
                type: string
                format: email
                description: 'Customer email address.'
                example: 'budi.santoso@example.com'
                nullable: true
            required:
              - trxRef
              - bankCode
              - currencyCode
              - amount
/api/v2/initiate-payment-bank-transfer:
  post:
    summary: 'Process bank transfer payment request.'
    operationId: processBankTransferPaymentRequest
    description: 'Create a bank transfer payment request. The response contains the merchant bank account details that customers can use to make direct bank transfers. Customers will transfer funds directly to the provided bank account.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      201:
        description: 'Bank transfer payment request created successfully. Returns transaction ID, reference, and merchant bank account details for customer transfer.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20101002'
                message: 'Bank transfer payment request created successfully.'
                data:
                  trxId: TRX20241101003
                  trxRef: INV-2024-0003
                  bankCode: '014'
                  bankName: BCA
                  accountNumber: '1234567890'
                  accountHolderName: 'PT Merchant ABC'
                  amount: 300000
                  currencyCode: IDR
                  transferInstructions: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
              properties:
                code:
                  type: string
                  example: '20101002'
                message:
                  type: string
                  example: 'Bank transfer payment request created successfully.'
                data:
                  type: object
                  properties:
                    trxId:
                      type: string
                      example: TRX20241101003
                    trxRef:
                      type: string
                      example: INV-2024-0003
                      nullable: true
                    bankCode:
                      type: string
                      example: '014'
                      nullable: true
                    bankName:
                      type: string
                      example: BCA
                      nullable: true
                    accountNumber:
                      type: string
                      example: '1234567890'
                      nullable: true
                    accountHolderName:
                      type: string
                      example: 'PT Merchant ABC'
                      nullable: true
                    amount:
                      type: number
                      example: 300000
                      nullable: true
                    currencyCode:
                      type: string
                      example: IDR
                      nullable: true
                    transferInstructions:
                      type: string
                      example: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
                      nullable: true
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              trxRef:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0003
                nullable: false
              bankCode:
                type: string
                description: 'Bank code identifier. Use `/api/v2/banks` endpoint to get available bank codes.'
                example: '014'
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be transferred by the customer.'
                example: 300000.5
                nullable: false
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'Bank transfer payment for invoice'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'Bank transfer payment for invoice INV-2024-0003'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
              customerEmail:
                type: string
                format: email
                description: 'Customer email address.'
                example: 'budi.santoso@example.com'
                nullable: true
            required:
              - trxRef
              - bankCode
              - currencyCode
              - amount
