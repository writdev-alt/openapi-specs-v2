/api/v2/payments:
  get:
    summary: 'List payment transactions.'
    operationId: listPayments
    description: 'Retrieve a list of payment transactions for the authenticated merchant. Returns payment transactions with their status, amounts, and transaction details.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
      -
        in: query
        name: status
        description: 'Filter payments by status (pending, completed, failed, canceled, expired).'
        required: false
        schema:
          type: string
          enum:
            - pending
            - completed
            - failed
            - canceled
            - expired
        example: completed
      -
        in: query
        name: page
        description: 'Page number for pagination. Default is 1.'
        required: false
        schema:
          type: integer
          minimum: 1
          default: 1
        example: 1
      -
        in: query
        name: per_page
        description: 'Number of payments per page. Default is 20, maximum is 100.'
        required: false
        schema:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        example: 20
    responses:
      200:
        description: 'List of payment transactions retrieved successfully. Returns an array of payment transactions with their details.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '20001002'
                data:
                  type: array
                  items:
                    type: object
                    properties:
                      trxId:
                        type: string
                        example: TRX20241101001
                      trxReference:
                        type: string
                        example: INV-2024-0001
                        nullable: true
                      rrn:
                        type: string
                        example: '123456789012'
                        nullable: true
                      amount:
                        type: integer
                        example: 150000
                      currencyCode:
                        type: string
                        example: IDR
                      status:
                        $ref: '#/components/schemas/TransactionStatus'
                      paymentMethod:
                        type: string
                        example: QRIS
                        nullable: true
                      description:
                        type: string
                        example: QRIS payment for invoice INV-2024-0001
                        nullable: true
                      customerName:
                        type: string
                        example: Budi Santoso
                        nullable: true
                      customerPhone:
                        type: string
                        example: '+628123456789'
                        nullable: true
                      createdAt:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:00:00Z'
                      paidAt:
                        type: string
                        format: date-time
                        example: '2024-11-01T10:15:00Z'
                        nullable: true
                currentPage:
                  type: integer
                  example: 1
                firstPageUrl:
                  type: string
                  format: uri
                  example: '/api/v2/payments?page=1'
                from:
                  type: integer
                  example: 1
                lastPage:
                  type: integer
                  example: 5
                lastPageUrl:
                  type: string
                  format: uri
                  example: '/api/v2/payments?page=5'
                links:
                  type: array
                  items:
                    type: object
                    properties:
                      url:
                        type: string
                        format: uri
                        nullable: true
                      label:
                        type: string
                      active:
                        type: boolean
                  example:
                    -
                      url: null
                      label: '&laquo; Previous'
                      active: false
                    -
                      url: '/api/v2/payments?page=1'
                      label: '1'
                      active: true
                    -
                      url: '/api/v2/payments?page=2'
                      label: '2'
                      active: false
                    -
                      url: '/api/v2/payments?page=2'
                      label: 'Next &raquo;'
                      active: false
                nextPageUrl:
                  type: string
                  format: uri
                  nullable: true
                  example: '/api/v2/payments?page=2'
                path:
                  type: string
                  example: '/api/v2/payments'
                perPage:
                  type: integer
                  example: 20
                prevPageUrl:
                  type: string
                  format: uri
                  nullable: true
                  example: null
                to:
                  type: integer
                  example: 20
                total:
                  type: integer
                  example: 100
              example:
                code: '20001002'
                data:
                  -
                    trxId: TRX20241101001
                    trxReference: INV-2024-0001
                    rrn: '123456789012'
                    amount: 150000
                    currencyCode: IDR
                    status: completed
                    paymentMethod: QRIS
                    description: QRIS payment for invoice INV-2024-0001
                    customerName: Budi Santoso
                    customerPhone: '+628123456789'
                    createdAt: '2024-11-01T10:00:00Z'
                    paidAt: '2024-11-01T10:15:00Z'
                  -
                    trxId: TRX20241101002
                    trxReference: INV-2024-0002
                    rrn: null
                    amount: 200000
                    currencyCode: IDR
                    status: pending
                    paymentMethod: QRIS
                    description: QRIS payment for invoice INV-2024-0002
                    customerName: null
                    customerPhone: null
                    createdAt: '2024-11-01T11:00:00Z'
                    paidAt: null
                currentPage: 1
                firstPageUrl: '/api/v2/payments?page=1'
                from: 1
                lastPage: 5
                lastPageUrl: '/api/v2/payments?page=5'
                links:
                  -
                    url: null
                    label: '&laquo; Previous'
                    active: false
                  -
                    url: '/api/v2/payments?page=1'
                    label: '1'
                    active: true
                  -
                    url: '/api/v2/payments?page=2'
                    label: '2'
                    active: false
                  -
                    url: '/api/v2/payments?page=2'
                    label: 'Next &raquo;'
                    active: false
                nextPageUrl: '/api/v2/payments?page=2'
                path: '/api/v2/payments'
                perPage: 20
                prevPageUrl: null
                to: 20
                total: 100
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
/api/v2/initiate-payment-qris:
  post:
    summary: 'Process QRIS payment request.'
    operationId: processQRISPaymentRequest
    description: "Create a QRIS (Quick Response Code Indonesian Standard) payment request that is routed\nthrough the Netzme payment gateway. The response contains the QR data needed for rendering\nthe QR code along with transaction identifiers."
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      200:
        description: 'QRIS payment request created successfully. Returns transaction ID, reference, and QR code content.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20001001'
                trxId: TRX20241101001
                refTrx: INV-2024-0001
                qrisContent: 00020101021226680012IDCO...
              properties:
                code:
                  type: string
                  example: '20001001'
                trxId:
                  type: string
                  example: TRX20241101001
                refTrx:
                  type: string
                  example: INV-2024-0001
                qrisContent:
                  type: string
                  example: 00020101021226680012IDCO...
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              refTrx:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0001
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be charged to the customer.'
                example: 150000.5
                nullable: false
              expirationTime:
                type: integer
                description: 'Expiry time for the QR code in minutes (30 - 1440).'
                example: 60
                nullable: false
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'QRIS top-up'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'QRIS payment for invoice INV-2024-0001'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
            required:
              - refTrx
              - currencyCode
              - amount
/api/v2/initiate-payment-virtual-account:
  post:
    summary: 'Process virtual account payment request.'
    operationId: processVirtualAccountPaymentRequest
    description: 'Create a virtual account payment request for bank transfer. The response contains the virtual account number that customers can use to make payments via bank transfer or ATM.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      201:
        description: 'Virtual account payment request created successfully. Returns transaction ID, reference, virtual account number, and bank details.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20101001'
                trxId: TRX20241101002
                refTrx: INV-2024-0002
                virtualAccountNumber: '0141234567890123456'
                bankCode: '014'
                bankName: BCA
                expirationTime: 1440
                expirationAt: '2024-11-02T10:00:00Z'
              properties:
                code:
                  type: string
                  example: '20101001'
                trxId:
                  type: string
                  example: TRX20241101002
                refTrx:
                  type: string
                  example: INV-2024-0002
                virtualAccountNumber:
                  type: string
                  example: '0141234567890123456'
                  description: 'Virtual account number that customers can use to make payment'
                bankCode:
                  type: string
                  example: '014'
                  description: 'Bank code identifier'
                bankName:
                  type: string
                  example: BCA
                  description: 'Full name of the bank'
                expirationTime:
                  type: integer
                  example: 1440
                  description: 'Expiry time for the virtual account in minutes'
                expirationAt:
                  type: string
                  format: date-time
                  example: '2024-11-02T10:00:00Z'
                  description: 'Expiration date and time for the virtual account'
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              refTrx:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0002
                nullable: false
              bankCode:
                type: string
                description: 'Bank code identifier. Use `/api/v2/banks` endpoint to get available bank codes.'
                example: '014'
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be charged to the customer.'
                example: 250000.5
                nullable: false
              expirationTime:
                type: integer
                description: 'Expiry time for the virtual account in minutes (30 - 1440). Default is 1440 (24 hours).'
                example: 1440
                nullable: false
                minimum: 30
                maximum: 1440
                default: 1440
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'Virtual account payment for invoice'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'Virtual account payment for invoice INV-2024-0002'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
              customerEmail:
                type: string
                format: email
                description: 'Customer email address.'
                example: 'budi.santoso@example.com'
                nullable: true
            required:
              - refTrx
              - bankCode
              - currencyCode
              - amount
/api/v2/initiate-payment-bank-transfer:
  post:
    summary: 'Process bank transfer payment request.'
    operationId: processBankTransferPaymentRequest
    description: 'Create a bank transfer payment request. The response contains the merchant bank account details that customers can use to make direct bank transfers. Customers will transfer funds directly to the provided bank account.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      201:
        description: 'Bank transfer payment request created successfully. Returns transaction ID, reference, and merchant bank account details for customer transfer.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20101002'
                trxId: TRX20241101003
                refTrx: INV-2024-0003
                bankCode: '014'
                bankName: BCA
                accountNumber: '1234567890'
                accountHolderName: 'PT Merchant ABC'
                amount: 300000
                currencyCode: IDR
                transferInstructions: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
              properties:
                code:
                  type: string
                  example: '20101002'
                trxId:
                  type: string
                  example: TRX20241101003
                refTrx:
                  type: string
                  example: INV-2024-0003
                bankCode:
                  type: string
                  example: '014'
                  description: 'Bank code identifier'
                bankName:
                  type: string
                  example: BCA
                  description: 'Full name of the bank'
                accountNumber:
                  type: string
                  example: '1234567890'
                  description: 'Merchant bank account number for customer transfer'
                accountHolderName:
                  type: string
                  example: 'PT Merchant ABC'
                  description: 'Account holder name'
                amount:
                  type: number
                  example: 300000
                  description: 'Amount to be transferred (must match exactly)'
                currencyCode:
                  type: string
                  example: IDR
                  description: 'Currency code'
                transferInstructions:
                  type: string
                  example: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
                  description: 'Instructions for the customer on how to complete the transfer'
      422:
        $ref: '#/components/responses/ValidationError'
      500:
        $ref: '#/components/responses/ServerError'
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              refTrx:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0003
                nullable: false
              bankCode:
                type: string
                description: 'Bank code identifier. Use `/api/v2/banks` endpoint to get available bank codes.'
                example: '014'
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be transferred by the customer.'
                example: 300000.5
                nullable: false
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'Bank transfer payment for invoice'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'Bank transfer payment for invoice INV-2024-0003'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
              customerEmail:
                type: string
                format: email
                description: 'Customer email address.'
                example: 'budi.santoso@example.com'
                nullable: true
            required:
              - refTrx
              - bankCode
              - currencyCode
              - amount
