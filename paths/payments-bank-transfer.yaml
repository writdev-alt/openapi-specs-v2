/api/v2/initiate-payment-bank-transfer:
  post:
    summary: 'Process bank transfer payment request.'
    operationId: processBankTransferPaymentRequest
    description: 'Create a bank transfer payment request. The response contains the merchant bank account details that customers can use to make direct bank transfers. Customers will transfer funds directly to the provided bank account.'
    parameters:
      -
        in: header
        name: X-API-KEY
        description: 'Merchant public API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-API-KEY}'
        schema:
          type: string
      -
        in: header
        name: X-MERCHANT-KEY
        description: 'Merchant secret API key for authentication. Obtain from the merchant dashboard under API Access.'
        example: '{X-MERCHANT-KEY}'
        schema:
          type: string
    responses:
      201:
        description: 'Bank transfer payment request created successfully. Returns transaction ID, reference, and merchant bank account details for customer transfer.'
        content:
          application/json:
            schema:
              type: object
              example:
                code: '20101002'
                message: 'Bank transfer payment request created successfully.'
                data:
                  trxId: TRX20241101003
                  trxRef: INV-2024-0003
                  bankCode: '014'
                  bankName: BCA
                  accountNumber: '1234567890'
                  accountHolderName: 'PT Merchant ABC'
                  amount: 300000
                  currencyCode: IDR
                  transferInstructions: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
              properties:
                code:
                  type: string
                  example: '20101002'
                message:
                  type: string
                  example: 'Bank transfer payment request created successfully.'
                data:
                  type: object
                  properties:
                    trxId:
                      type: string
                      example: TRX20241101003
                    trxRef:
                      type: string
                      example: INV-2024-0003
                      nullable: true
                    bankCode:
                      type: string
                      example: '014'
                      nullable: true
                    bankName:
                      type: string
                      example: BCA
                      nullable: true
                    accountNumber:
                      type: string
                      example: '1234567890'
                      nullable: true
                    accountHolderName:
                      type: string
                      example: 'PT Merchant ABC'
                      nullable: true
                    amount:
                      type: number
                      example: 300000
                      nullable: true
                    currencyCode:
                      type: string
                      example: IDR
                      nullable: true
                    transferInstructions:
                      type: string
                      example: 'Please transfer the exact amount to the account above. Include your reference number in the transfer notes.'
                      nullable: true
      401:
        description: 'Unauthorized - Authentication required.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '40101001'
                message:
                  type: string
                  example: 'Unauthorized'
              example:
                code: '40101001'
                message: 'Unauthorized'
      403:
        description: 'Forbidden - Access denied, insufficient permissions.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '40301001'
                message:
                  type: string
                  example: 'Access denied. You do not have permission to perform this action.'
                success:
                  type: boolean
                  example: false
              example:
                code: '40301001'
                message: 'Access denied. You do not have permission to perform this action.'
                success: false
      422:
        description: 'Validation error - The request data is invalid.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '42201001'
                message:
                  type: string
                  example: 'The given data was invalid.'
                errors:
                  type: object
                  additionalProperties:
                    type: array
                    items:
                      type: string
                  example:
                    amount:
                      - 'The amount field is required.'
                    currencyCode:
                      - 'Invalid or mismatched currency code.'
              example:
                code: '42201001'
                message: 'The given data was invalid.'
                errors:
                  amount:
                    - 'The amount field is required.'
                  currencyCode:
                    - 'Invalid or mismatched currency code.'
      429:
        description: 'Too Many Requests - Rate limit exceeded.'
        content:
          application/json:
            schema:
              type: object
              properties:
                code:
                  type: string
                  example: '42901001'
                message:
                  type: string
                  example: 'Too many requests. Please try again later.'
                retryAfter:
                  type: integer
                  example: 180
              example:
                code: '42901001'
                message: 'Too many requests. Please try again later.'
                retryAfter: 180
    tags:
      - Payments
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              trxRef:
                type: string
                description: 'Unique merchant transaction reference.'
                example: INV-2024-0003
                nullable: false
              bankCode:
                type: string
                description: 'Bank code identifier. Use `/api/v2/banks` endpoint to get available bank codes.'
                example: '014'
                nullable: false
              currencyCode:
                type: string
                description: 'Must be `IDR`.'
                example: IDR
                nullable: false
              amount:
                type: number
                description: 'Total amount to be transferred by the customer.'
                example: 300000.5
                nullable: false
              note:
                type: string
                description: 'A short internal note about the transaction.'
                example: 'Bank transfer payment for invoice'
                nullable: true
              description:
                type: string
                description: 'A customer-facing description that will appear on receipts.'
                example: 'Bank transfer payment for invoice INV-2024-0003'
                nullable: true
              customerName:
                type: string
                description: 'Customer full name.'
                example: 'Budi Santoso'
                nullable: true
              customerPhone:
                type: string
                description: 'Customer phone number in international format.'
                example: '+628123456789'
                nullable: true
              customerEmail:
                type: string
                format: email
                description: 'Customer email address.'
                example: 'budi.santoso@example.com'
                nullable: true
            required:
              - trxRef
              - bankCode
              - currencyCode
              - amount

